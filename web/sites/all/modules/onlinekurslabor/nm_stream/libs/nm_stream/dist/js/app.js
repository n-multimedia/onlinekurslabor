(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],u=0,m=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},i={app:0},n=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="../onlinekurslabor/web/sites/all/modules/onlinekurslabor/nm_stream/libs/nm_stream/dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"06cb":function(t,e,s){"use strict";var a=s("3f40"),i=s.n(a);i.a},"0b3e":function(t,e,s){"use strict";var a=s("9f6b"),i=s.n(a);i.a},"1c26":function(t,e,s){"use strict";var a=s("4bad"),i=s.n(a);i.a},"261f":function(t,e,s){},"27d9":function(t,e,s){},2817:function(t,e,s){"use strict";var a=s("3213"),i=s.n(a);i.a},3213:function(t,e,s){},"3f40":function(t,e,s){},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=n,t.exports=i,i.id="4678"},"4bad":function(t,e,s){},5197:function(t,e,s){"use strict";var a=s("77be"),i=s.n(a);i.a},5218:function(t,e,s){"use strict";var a=s("aa4f"),i=s.n(a);i.a},"55cd":function(t,e,s){},"564d":function(t,e,s){"use strict";var a=s("55cd"),i=s.n(a);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a,i,n,o,r=s("2b0e"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"stream"}},[s("transition",{attrs:{name:"fade"}},[t.initialized?s("stream-filter",{attrs:{streamOptions:t.streamOptions}}):t._e()],1),s("pulse-loader",{attrs:{loading:!t.initialized||t.busyLoading,color:t.busyLoadingColor,size:t.busyLoadingSize}}),t.initialized&&t.streamOptions.containerNID>0&&t.streamOptions.permissions.canCreatePost?s("stream-post-form",{attrs:{streamOptions:t.streamOptions,mentionMembers:t.getMentionMembers(t.streamOptions.contextNID)},on:{"stream-post-added":t.addPost}}):t._e(),t.initialized&&0==t.posts.length?s("div",[t._v(" "+t._s(t.$t("empty.no_posts_found"))+" ")]):t._e(),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"},{name:"keep-scroll-position",rawName:"v-keep-scroll-position"}],staticClass:"stream-post-wrapper",attrs:{"infinite-scroll-disabled":"busyLoading","infinite-scroll-distance":"10"}},[s("transition-group",{attrs:{name:"list"}},t._l(t.sortedPosts,(function(e){return s("stream-post",{key:e.nid,attrs:{post:t.getLoadedPost(e),comments:t.getNodeComments(e.nid),streamOptions:t.streamOptions,mentionMembers:t.getMentionMembers(e.context.nid)},on:{"stream-post-deleted":t.deletePost,"stream-comment-deleted":t.deleteComment,"stream-comment-added":t.addComment,"stream-user-added":t.addUser}})})),1)],1),s("br"),s("pulse-loader",{attrs:{loading:t.busyLoadingMore,color:t.busyLoadingColor,size:t.busyLoadingSize}}),s("br")],1)},c=[],d=(s("4de4"),s("7db0"),s("c975"),s("fb6a"),s("a434"),s("d3b7"),s("ac1f"),s("3ca3"),s("5319"),s("ddb0"),s("2b3d"),s("96cf"),s("1da1")),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-flip"},[s("div",{staticClass:"flip"},[s("div",{staticClass:"front"},[s("div",{staticClass:"stream-post card"},[this.streamOptions.containerNID!==this.post.container.nid?s("div",{staticClass:"row post-context"},[s("div",{staticClass:"col-12"},[s("span",{staticClass:"float-right"},[t._v(" "+t._s(t.$t("label.postContextFrom"))+": "),s("a",{attrs:{href:t.streamLink}},[t._v(t._s(this.post.container.title))])])])]):t._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("img",{staticClass:"card-img-top rounded-circle",attrs:{src:t.post.user.avatarUrl,title:t.post.user.name}})]),s("div",{staticClass:"col-10"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 post-header"},[null!==this.privacy?s("div",{staticClass:"post-privacy-wrapper float-right"},[s("img",{staticClass:"post-privacy",attrs:{src:t.privacy.img,alt:t.privacy.title,title:t.privacy.title}})]):t._e(),1==t.post.sticky?s("div",{staticClass:"post-sticky",attrs:{title:t.$t("plugins.sticky.status_title")}},[s("font-awesome-icon",{attrs:{icon:["fa","anchor"]}})],1):t._e(),t.canEdit||t.canDelete?s("div",[s("b-dropdown",{staticClass:"post-actions-dropdown m-md-2 float-right",attrs:{text:"...",offset:"-120"}},[t.canEdit?s("b-dropdown-item",{on:{click:t.editPost}},[t._v(t._s(t.$t("button.edit"))+" ")]):t._e(),t.canDelete?s("b-dropdown-item",{on:{click:t.deletePost}},[t._v(t._s(t.$t("button.delete"))+" ")]):t._e()],1)],1):t._e(),s("div",{staticClass:"username"},[s("a",{attrs:{href:t.post.user.profileUrl}},[t._v(t._s(t.post.user.name))])]),s("div",{staticClass:"created"},[s("font-awesome-icon",{attrs:{icon:["far","clock"]}}),s("span",{attrs:{title:t._f("moment")(t.post.created,"L LT")}},[t._v(" "+t._s(t._f("moment")(t.post.created,"from"))+" ")])],1)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 body"},[s("p",{attrs:{tag:"p"},domProps:{innerHTML:t._s(t.post.body_formatted)}}),t.post.poll?s("plugin-poll-view",t._b({key:t.pollViewRenderOnceKey,on:{addvote:t.pollAddVote}},"plugin-poll-view",t.post.poll,!1)):t._e()],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t.post.attachments.length>0?s("div",{staticClass:"stream-post-attachments"},[s("font-awesome-icon",{attrs:{icon:["far","file"]}}),t._v(" "+t._s(t.$t("label.attachments"))+" "),s("ul",t._l(t.post.attachments,(function(e){return s("li",{key:e.fid},[s("span",{domProps:{innerHTML:t._s(e.download_link)}}),e.permissions.canDelete?s("a",{staticClass:"attachment-trash-delete",attrs:{href:"#",title:t.$t("button.delete_attachment")},on:{click:function(s){return s.preventDefault(),t.onAttachmentDeleteConf(e)}}},[s("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1):t._e()])})),0)],1):t._e(),t.sortedComments.length>0?s("div",{staticClass:"stream-post-footer"},[s("div",[t.showComments?s("a",{key:"false",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showComments=!t.showComments}}},[t._v(t._s(t.$t("link.hide_x_comments",{count:t.sortedComments.length})))]):s("a",{key:"true",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.toggleComments(e)}}},[t._v(" "+t._s(t.$t("link.show_x_comments",{count:t.sortedComments.length}))+" ")])])]):t._e()])])])]),s("div",{staticClass:"row comments-wrapper"},[s("div",{staticClass:"col-10 offset-2"},[t.canCreateComment?s("stream-comment-form",{attrs:{streamOptions:t.streamOptions,mentionMembers:t.mentionMembers,post:t.post},on:{"stream-user-added":t.addUser,"stream-comment-added":t.addComment}}):t._e(),s("transition",{attrs:{name:"fade"}},[t.sortedComments.length>0&&!0===t.showComments?s("div",[s("transition-group",{attrs:{name:"list"}},t._l(t.sortedComments,(function(e){return s("stream-comment",{key:e.cid,attrs:{streamOptions:t.streamOptions,comment:e,mentionMembers:t.mentionMembers,user:e.user},on:{"stream-comment-deleted":t.deleteComment}})})),1)],1):t._e()])],1)])])]),s("div",{ref:"backEdit",staticClass:"back-edit"},[s("div",{staticClass:"stream-post card"},[s(t.streamPostFormComponent,{ref:"streamPostForm",tag:"component",attrs:{streamOptions:t.streamOptions,editPost:t.post,mentionMembers:t.mentionMembers},on:{"form-edit-canceled":function(e){return t.editCanceled()},"post-form-onAttachmentDeleteConf":t.onAttachmentDeleteConf}})],1)]),s("div",{ref:"backDelete",staticClass:"back-delete"},[s("div",{staticClass:"stream-post card"},[s("h3",[t._v(t._s(t.$t("warning.delete_post_really_want_to")))]),s("br"),s("p",[t._v(" "+t._s(t.$t("warning.delete_post_action_cannot_be_undone"))+" ")]),s("br"),s("div",{staticClass:"float-right"},[s("button",{staticClass:"btn btn-outline-danger float-right",on:{click:t.onDeleteSubmit}},[t._v(t._s(t.$t("button.delete"))+" ")]),s("button",{staticClass:"btn btn-outline-secondary float-right",on:{click:t.onDeleteCancel}},[t._v(t._s(t.$t("button.cancel"))+" ")])])])])]),s("b-modal",{ref:"postDeleteAttachmentConf",attrs:{id:"bv-modal-delete-attachment",centered:"","hide-footer":"",title:t.$t("label.attachment_delete")}},[s("div",{staticClass:"d-block text-center"},[t._v(" "+t._s(t.$t("warning.delete_attachment_really_want_to"))+" "),s("br"),s("br")]),s("b-button",{staticClass:"mt-3",attrs:{variant:"",block:""},on:{click:t.hideModal}},[t._v(t._s(t.$t("button.cancel")))]),s("b-button",{staticClass:"mt-3",attrs:{variant:"danger",block:""},on:{click:function(e){return t.onAttachmentDelete()}}},[t._v(t._s(t.$t("button.delete"))+" ")])],1)],1)},m=[],p=(s("c740"),s("9911"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-flip"},[s("div",{staticClass:"flip"},[s("div",{staticClass:"front"},[s("div",{staticClass:"stream-comment card"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("img",{staticClass:"card-img-top rounded-circle",attrs:{src:t.user.avatarUrl,title:t.user.name}})]),s("div",{staticClass:"col-10"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t.canEdit||t.canDelete?s("div",[s("b-dropdown",{staticClass:"post-actions-dropdown m-md-2 float-right",attrs:{text:"...",offset:"-120"}},[t.canEdit?s("b-dropdown-item",{on:{click:t.editComment}},[t._v(t._s(t.$t("button.edit"))+" ")]):t._e(),t.canDelete?s("b-dropdown-item",{on:{click:t.deleteComment}},[t._v(t._s(t.$t("button.delete"))+" ")]):t._e()],1)],1):t._e(),s("div",{staticClass:"username"},[s("a",{attrs:{href:t.user.profileUrl}},[t._v(t._s(t.user.name))])]),s("div",{staticClass:"created"},[s("span",{attrs:{title:t._f("moment")(t.comment.created,"L LT")}},[t._v(" "+t._s(t._f("moment")(t.comment.created,"from")))])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 body"},[s("p",{attrs:{tag:"p"},domProps:{innerHTML:t._s(t.comment.body_formatted)}})])])])])])]),s("div",{ref:"backEdit",staticClass:"back-edit"},[s("div",{staticClass:"stream-comment card"},[s("stream-comment-form",{ref:"streamCommentForm",attrs:{streamOptions:t.streamOptions,editComment:t.comment,mentionMembers:t.mentionMembers},on:{"form-edit-canceled":function(e){return t.editCanceled()}}})],1)]),s("div",{ref:"backDelete",staticClass:"back-delete"},[s("div",{staticClass:"stream-post card"},[s("h4",[t._v(t._s(t.$t("warning.delete_comment_really_want_to")))]),s("br"),s("p",[t._v(" "+t._s(t.$t("warning.delete_comment_action_cannot_be_undone"))+" ")]),s("div",{staticClass:"float-right"},[s("button",{staticClass:"btn btn-outline-danger float-right",on:{click:function(e){return t.onDelete()}}},[t._v(t._s(t.$t("button.delete"))+" ")]),s("button",{staticClass:"btn btn-outline-secondary float-right",on:{click:function(e){return t.onDeleteCancel()}}},[t._v(t._s(t.$t("button.cancel"))+" ")])])])])])])}),h=[],f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stream-comment-from card"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("transition",{attrs:{name:"fade"}},[t.formActive?s("img",{key:t.formActive,staticClass:"card-img-top rounded-circle",attrs:{src:t.author.avatarUrl,title:t.author.name}}):t._e()])],1),s("div",{staticClass:"col-10"},[s("stream-textarea",{attrs:{"body-text":t.bodyText,mentionMembers:t.mentionMembers,"form-active":t.formActive,busyLoading:t.busyLoading,"textarea-placeholder":t.$t("placeholder.your_comment_message")},on:{save:t.saveComment,reset:t.resetForm,changeBody:t.changedBodyText,changeFormActive:t.changedFormActive}}),s("transition",{attrs:{name:"fade"}},[s("div",{key:t.formActive,staticClass:"row stream-action-2"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row"},[t.formActive?s("div",{staticClass:"col-12 action-buttons"},[s("button",{staticClass:"btn btn-outline-primary stream-comment-post float-right",attrs:{disabled:this.bodyText.length<1||t.busyLoading},on:{click:t.saveComment}},[t._v(t._s(t.$t("button.post"))+" ")]),s("button",{staticClass:"btn btn-outline-secondary stream-comment-cancel float-right",attrs:{disabled:t.busyLoading},on:{click:t.resetForm}},[t._v(t._s(t.$t("button.cancel"))+" ")]),s("pulse-loader",{attrs:{loading:t.busyLoading,color:t.busyLoadingColor,size:t.busyLoadingSize}})],1):t._e()])])])])],1)])])},v=[],b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("at-ta",{attrs:{members:t.mentionMembers,"name-key":"name"},on:{at:t.atChanged},scopedSlots:t._u([{key:"item",fn:function(e){return[s("img",{staticClass:"rounded-circle",attrs:{src:e.item.avatar}}),s("span",{domProps:{textContent:t._s(e.item.realname)}})]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.bodyText,expression:"bodyText"},{name:"model",rawName:"v-model.lazy",value:t.bodyText,expression:"bodyText",modifiers:{lazy:!0}}],staticClass:"stream-textbody",attrs:{name:"body",disabled:t.busyLoading,placeholder:t.textareaPlaceholder},domProps:{value:t.bodyText,value:t.bodyText},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.escPressed(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitOnCtrlEnter(e)}],focus:function(e){t.formActive=!0},input:function(e){e.target.composing||(t.bodyText=e.target.value)},change:function(e){t.bodyText=e.target.value}}})])},g=[],y=s("53ff"),_=s.n(y),C={name:"StreamTextarea",components:{AtTa:_.a},props:["mentionMembers","textareaPlaceholder","busyLoading","formActive","bodyText"],data:function(){return{}},methods:{atChanged:function(t){if(t){var e=new Event("change");this.$el.querySelector("textarea").dispatchEvent(e)}},escPressed:function(){0===this.bodyText.length&&this.$emit("reset")},submitOnCtrlEnter:function(t){t.ctrlKey&&this.$emit("save")}},watch:{bodyText:function(t,e){this.$emit("changeBody",t,e)},formActive:function(t,e){this.$emit("changeFormActive",t,e)}}},x=C,w=(s("c8c2"),s("2877")),k=Object(w["a"])(x,b,g,!1,null,null,null),$=k.exports,P={props:["streamOptions","post","editComment","mentionMembers"],name:"stream-comment-form",components:{StreamTextarea:$},methods:{atChanged:function(t){if(t){var e=new Event("change");this.$el.querySelector("textarea").dispatchEvent(e)}},resizeTextarea:function(t){this.resizeTextareaElement(t.target),this.resizeCommentFormContainer()},resizeCommentFormContainer:function(){this.editComment&&(this.$parent.$el.querySelector(".stream-comment").style.height=150+this.$el.querySelector("textarea").scrollHeight+"px")},saveComment:function(){var t=this;this.busyLoading=!0;var e=this,s={};if(s.body=this.bodyText,this.editComment){var a=this.$config.get("api.apiCommentUpdateUrl").replace("%comment",this.editComment.cid).replace("%token",this.streamOptions.token);r["default"].axios.post(a,s,{withCredentials:!0}).then((function(s){e.resetForm(),1===s.data.status?(e.editComment.body_formatted=s.data.commentData.body_formatted,e.editComment.body=s.data.commentData.body,e.resetForm()):alert(t.$t("warning.error_occured_please_repeat_your_action"))}))}else{var i=this.$config.get("api.apiCommentAddUrl").replace("%node",this.post.nid).replace("%token",this.streamOptions.token);r["default"].axios.post(i,s,{withCredentials:!0}).then((function(s){if(e.resetForm(),1===s.data.status){var a=s.data.commentData,i=s.data.userData;e.$emit("stream-comment-added",a),e.$emit("stream-user-added",i)}else alert(t.$t("warning.error_occured_please_repeat_your_action"))}))}},resizeTextareaElement:function(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"},escPressed:function(){0===this.bodyText.length&&this.resetForm()},resetForm:function(){this.editComment?(this.$emit("form-edit-canceled"),this.$parent.$el.querySelector(".stream-comment").style.height="auto"):(this.bodyText="",this.formActive=!1,this.$el.querySelector("textarea.stream-textbody").blur(),this.$el.querySelector("textarea.stream-textbody").style.height="auto"),this.busyLoading=!1},initializeComment:function(){var t=this;this.editComment&&(this.formActive=!0,this.bodyText=this.editComment.body,this.$nextTick((function(){t.resizeTextareaElement(t.$el.querySelector("textarea")),t.resizeCommentFormContainer()})))},updateAuthor:function(){this.author=this.streamOptions.loggedInUser,this.editComment&&(this.author=this.editComment.user)},changedBodyText:function(t){this.bodyText=t},changedFormActive:function(t){this.formActive=t}},mounted:function(){var t=this;this.$nextTick((function(){t.$el.setAttribute("style","height:"+t.$el.scrollHeight+"px;"),t.$el.addEventListener("input",t.resizeTextarea)})),this.updateAuthor()},beforeDestroy:function(){this.$el.removeEventListener("input",this.resizeTextarea)},render:function(){return this.$slots.default[0]},data:function(){return{formActive:!1,busyLoading:!1,busyLoadingColor:"#888",busyLoadingSize:"10px",author:null,bodyText:""}}},O=P,D=(s("0b3e"),Object(w["a"])(O,f,v,!1,null,"6e9de7cc",null)),j=D.exports,S={props:["streamOptions","comment","user","mentionMembers"],components:{StreamCommentForm:j},name:"stream-comment",data:function(){return{}},computed:{canEdit:function(){return this.comment.permissions.canEdit},canDelete:function(){return this.comment.permissions.canDelete}},methods:{editComment:function(){var t=this;this.$el.classList.add("flip-active"),setTimeout((function(){t.$refs.streamCommentForm.initializeComment(),t.$refs.backDelete.classList.add("hide"),t.$refs.backEdit.classList.remove("hide"),t.$refs.streamCommentForm.initializeComment()}),200)},deleteComment:function(){var t=this;setTimeout((function(){t.$el.classList.add("flip-active"),t.$refs.backEdit.classList.add("hide"),t.$refs.backDelete.classList.remove("hide")}),200)},onDelete:function(){var t=this,e=this,s=this.$config.get("api.apiCommentDeleteUrl").replace("%comment",this.comment.cid).replace("%token",this.streamOptions.token);r["default"].axios.get(s,{withCredentials:!0}).then((function(s){1===s.data.status?(e.$emit("stream-comment-deleted",e.comment),t.$el.classList.remove("flip-active")):alert(t.$t("warning.error_occured_please_repeat_your_action"))}))},onDeleteCancel:function(){this.$el.classList.remove("flip-active")},editCanceled:function(){this.$el.classList.remove("flip-active")}}},A=S,T=(s("a1ca"),Object(w["a"])(A,p,h,!1,null,"12ae63cd",null)),z=T.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stream-post-form card",on:{dragover:t.dragOver}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("transition",{attrs:{name:"fade"}},[t.formActive?s("img",{key:t.formActive,staticClass:"card-img-top rounded-circle",attrs:{src:t.author.avatarUrl,title:t.author.name}}):t._e()])],1),t.currentPluginTemplate?s("div",{staticClass:"active-plugin-content col-10"},[s("keep-alive",[s(t.currentPluginTemplate,{tag:"component",attrs:{param1:t.poll},on:{dialogSubmit:function(e){return t.pluginSubmitDialog(e)},dialogClose:function(e){return t.pluginCloseDialog()}}})],1)],1):t._e(),t.currentPluginTemplate?t._e():s("div",{staticClass:"col-10"},[s("stream-textarea",{ref:"streamTextarea",attrs:{"body-text":t.bodyText,mentionMembers:t.mentionMembers,"form-active":t.formActive,busyLoading:t.busyLoading,"textarea-placeholder":t.$t("placeholder.your_post_message")},on:{save:t.savePost,reset:t.resetForm,changeBody:t.changedBodyText,changeFormActive:t.changedFormActive}}),t.formActive?s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 plugins"},[t.canSetSticky?s("plugin-sticky",{attrs:{param1:t.stickyValue},on:{interface:function(e){t.stickyValue=e}}}):t._e(),s("plugin-poll",{attrs:{param1:t.poll},on:{interface:function(e){t.currentPluginTemplate=e}}})],1)]):t._e(),s("div",{staticClass:"row stream-action-1"},[s("transition",{attrs:{name:"fade"}},[t.formActive?s("div",{key:t.formActive,staticClass:"col-12 stream-attachments"},[s("vue-dropzone",{ref:"vueDropZone",attrs:{id:"dropzone",options:t.dropzoneOptions,disabled:t.busyLoading},on:{"vdropzone-processing":t.dropzoneQueueProcess,"vdropzone-file-added":t.resizeDropArea,"vdropzone-queue-complete":t.queueCompleted}}),t.editPost&&t.editPost.attachments.length>0?s("div",{ref:"postAttachmentList",staticClass:"stream-post-attachments"},[s("font-awesome-icon",{attrs:{icon:["fa","file"]}}),t._v(" "+t._s(t.$t("label.attachments"))+" "),t._l(t.editPost.attachments,(function(e){return s("div",{key:e.fid},[s("span",{domProps:{innerHTML:t._s(e.download_link)}}),e.permissions.canDelete?s("a",{staticClass:"attachment-trash-delete",attrs:{href:"#",title:t.$t("button.delete_attachment")},on:{click:function(s){return s.preventDefault(),t.onAttachmentDeleteConf(e)}}},[s("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1):t._e()])}))],2):t._e(),s("pulse-loader",{attrs:{loading:t.busyLoading,color:t.busyLoadingColor,size:t.busyLoadingSize}})],1):t._e()])],1),s("div",{staticClass:"row stream-action-2"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row"},[s("transition",{attrs:{name:"fade"}},[t.formActive?s("div",{key:t.formActive,staticClass:"col-12 action-buttons"},[s("stream-privacy-widget",{attrs:{privacyOptions:t.privacyOptions,privacyValue:t.privacyValue},on:{interface:function(e){t.privacyValue=e}}}),s("button",{staticClass:"btn btn-outline-primary stream-post-post float-right",attrs:{disabled:this.bodyText.length<1||t.busyLoading},on:{click:t.savePost}},[t._v(t._s(t.$t("button.post"))+" ")]),s("button",{staticClass:"btn btn-outline-secondary stream-post-cancel float-right",attrs:{disabled:t.busyLoading},on:{click:t.resetForm}},[t._v(t._s(t.$t("button.cancel"))+" ")])],1):t._e()])],1)])])],1)])])},L=[],F=(s("4160"),s("159b"),s("92c3")),E=s.n(F),M=(s("1e3f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.privacyOptions.length>0?s("div",{staticClass:"stream-post-privacy-settings"},[s("multiselect",{attrs:{options:t.privacyOptions,"track-by":"value","option-height":104,searchable:!1,"show-labels":!1,"allow-empty":t.allowEmpty,placeholder:t.$t("button.select_privacy"),disabled:t.busyLoading},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[s("img",{staticClass:"option__image",attrs:{src:e.option.img,alt:e.option.title}}),s("span",{staticClass:"option__desc"},[s("span",{staticClass:"option__title"},[t._v(t._s(e.option.title))])])]}},{key:"option",fn:function(e){return[s("img",{staticClass:"option__image",attrs:{src:e.option.img,alt:e.option.title,disabled:t.busyLoading}}),s("div",{staticClass:"option__desc"},[s("span",{staticClass:"option__title"},[t._v(t._s(e.option.title))]),s("span",{staticClass:"option__small"},[t._v(t._s(e.option.desc))])])]}}],null,!1,1178984776),model:{value:t.privacyValue,callback:function(e){t.privacyValue=e},expression:"privacyValue"}})],1):t._e()}),V=[],I={name:"StreamPrivacyWidget",props:["privacyOptions","privacyValue"],data:function(){return{busyLoading:null,allowEmpty:null}},watch:{privacyValue:function(t){this.$emit("interface",t)}}},R=I,N=(s("1c26"),s("2817"),Object(w["a"])(R,M,V,!1,null,"359bd306",null)),q=N.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"plugin plugin-abstract",class:t.name},[s("span",{staticClass:"plugin-toolbar-btn",class:{active:t.isActive},attrs:{title:t.title},on:{click:t.onClickCallback}},[s("font-awesome-icon",{attrs:{icon:t.icon}})],1)])},Z=[],H=s("c074"),Q={props:["param1"],components:{},name:"plugin",data:function(){return{icon:H["b"],label:"Not implemented yet",title:"Not implemented yet",name:this.$options._componentTag}},computed:{isActive:function(){return!1}},methods:{onClickCallback:function(){alert("To be implemented")}}},K=Q,W=(s("8d9c"),Object(w["a"])(K,B,Z,!1,null,"355204c2",null)),J=W.exports,G={extends:J,name:"plugin-sticky",data:function(){return{icon:H["a"],title:this.$t("plugins.sticky.title"),sticky:this.param1}},computed:{isActive:function(){return 1===this.sticky}},methods:{onClickCallback:function(){1===this.sticky?this.sticky=0:this.sticky=1,this.$emit("interface",this.sticky)}}},X=G,Y=(s("06cb"),Object(w["a"])(X,a,i,!1,null,null,null)),tt=Y.exports,et={extends:J,name:"plugin-poll",data:function(){return{icon:H["d"],activePluginComponent:"",title:this.$t("plugins.poll.title"),editPoll:this.param1}},computed:{isActive:function(){return!!this.editPoll}},methods:{onClickCallback:function(){this.activePluginComponent="PluginPollCreator",this.$emit("interface",this.activePluginComponent)}},mounted:function(){}},st=et,at=(s("6709"),Object(w["a"])(st,n,o,!1,null,null,null)),it=at.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row poll-wrapper"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row poll-title"},[s("div",{staticClass:"col-12"},[s("h4",[t._v(t._s(t.$t("plugins.poll.new_poll")))])])]),s("div",{staticClass:"row poll-container"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row poll-question"},[s("div",{staticClass:"col-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.poll.question,expression:"poll.question"}],attrs:{type:"text",placeholder:t.$t("plugins.poll.your_question")},domProps:{value:t.poll.question},on:{input:function(e){e.target.composing||t.$set(t.poll,"question",e.target.value)}}})])]),s("div",{staticClass:"poll-answers"},[s("draggable",{attrs:{tag:"div",list:t.poll.answers,handle:".handle"}},t._l(t.poll.answers,(function(e,a){return s("div",{key:e.value,staticClass:"row"},[s("div",{staticClass:"col-10"},[s("i",{staticClass:"handle"},[s("span")]),s("span",{staticClass:"text"},[t._v(t._s(e.name)+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.poll.answers[a].text,expression:"poll.answers[index].text"}],ref:"PollAnswerOptions",refInFor:!0,attrs:{placeholder:t.$t("plugins.poll.answer")+" "+(a+1),type:"text"},domProps:{value:t.poll.answers[a].text},on:{input:[function(e){e.target.composing||t.$set(t.poll.answers[a],"text",e.target.value)},function(e){return t.createNewInput(a)}],focus:function(e){return t.createNewInput(a)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextInput(a)}}})]),s("div",{staticClass:"col-2"},[s("i",{staticClass:"close",on:{click:function(e){return t.deleteInput(a)}}})])])})),0)],1),s("div",{staticClass:"row poll-options"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.poll.multiple,expression:"poll.multiple"}],staticClass:"checked custom-control-input",attrs:{tabindex:"1",type:"checkbox",id:"cb-multiple-votes"},domProps:{checked:Array.isArray(t.poll.multiple)?t._i(t.poll.multiple,null)>-1:t.poll.multiple},on:{change:function(e){var s=t.poll.multiple,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);a.checked?o<0&&t.$set(t.poll,"multiple",s.concat([n])):o>-1&&t.$set(t.poll,"multiple",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.poll,"multiple",i)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"cb-multiple-votes"}},[t._v(t._s(t.$t("plugins.poll.allow_multiple_votes")))])])])]),s("div",{staticClass:"row poll-options"},[s("div",{staticClass:"col-10"},[s("VueCtkDateTimePicker",{attrs:{tabindex:"1",locale:"$i18n.locale",label:t.$t("plugins.poll.pollEndDateLabel")},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),s("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.$t("plugins.poll.pollEndDateDescription")))])],1),s("div",{staticClass:"col-2"})]),s("div",{staticClass:"row poll-actions"},[s("div",{staticClass:"col-12"},[t.editPoll?s("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:!t.validate()},on:{click:t.createPoll}},[t._v(t._s(t.$t("plugins.poll.save"))+" ")]):t._e(),t.editPoll?t._e():s("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:!t.validate()},on:{click:t.createPoll}},[t._v(t._s(t.$t("plugins.poll.create"))+" ")]),s("button",{staticClass:"btn btn-outline-secondary",on:{click:t.closePoll}},[t._v(t._s(t.$t("plugins.poll.cancel"))+" ")]),s("button",{staticClass:"btn btn-outline-danger",attrs:{disabled:!t.editPoll},on:{click:t.deletePoll}},[t._v(t._s(t.$t("plugins.poll.delete"))+" ")])])])])])])])},ot=[],rt=(s("d81d"),s("310e")),lt=s.n(rt),ct={name:"plugin-poll-creator",components:{draggable:lt.a},props:{savePollUrl:{type:String},demo:{type:Boolean,default:!1},param1:{type:Object,default:null}},data:function(){return{poll:{question:"",answers:[{value:0,text:""},{value:1,text:""},{value:2,text:""}],multiple:!1},isValid:!1,success:null,editPoll:null,endDate:null}},mounted:function(){this.param1&&(this.poll=this.param1,this.endDate=this.param1.endDate?this.param1.endDate:null,this.editPoll=this.poll),0===this.poll.answers.length&&this.addEntry("")},methods:{addEntry:function(t){var e=Math.max.apply(Math,this.poll.answers.map((function(t){return t.value})));this.poll.answers.push({value:e+1,text:t})},createNewInput:function(t,e){this.poll.answers.length-1===t&&(e||this.poll.answers[t].text)&&this.addEntry("")},deleteInput:function(t){(t>0||this.poll.answers.length>1)&&this.poll.answers.splice(t,1)},nextInput:function(t){var e=this;this.poll.answers.length-1===t&&this.createNewInput(t,!0),setTimeout((function(){e.$refs.PollAnswerOptions[t+1].focus()}),10)},closePoll:function(){this.$root.$emit("plugins:poll:creator:close"),this.$emit("dialogClose")},deletePoll:function(){this.$root.$emit("plugins:poll:creator:close"),this.$emit("dialogSubmit",null),this.closePoll()},createPoll:function(){if(this.validate(),this.isValid){this.poll.answers=this.poll.answers.filter((function(t){if(t.text.length>0)return t}));var t={multiple:this.poll.multiple,question:this.poll.question,endDate:this.endDate,answers:[]};this.poll.answers.forEach((function(e){var s={value:e.value,text:e.text,votes:0,selected:!1};t.answers.push(s)})),this.$emit("dialogSubmit",t),this.$root.$emit("plugins:poll:creator:save",t),this.closePoll()}else this.alert(!1)},resetPoll:function(){this.poll.multiple=!1,this.poll.answers=[],this.addEntry(""),this.addEntry(""),this.addEntry(""),this.poll.question="",this.isValid=!1},validate:function(){var t=this.poll.answers.filter((function(t){if(t.text.length>0)return t})),e=t.length;return this.isValid=e>0,this.isValid},resetEndDate:function(){this.endDate=null},alert:function(t){var e=this;this.success=t,setTimeout((function(){e.success=null}),3e3)}}},dt=ct,ut=(s("66df"),Object(w["a"])(dt,nt,ot,!1,null,"b58c55c8",null)),mt=ut.exports,pt={props:["streamOptions","editPost","mentionMembers"],name:"stream-post-form",components:{StreamPrivacyWidget:q,vueDropzone:E.a,PluginSticky:tt,PluginPoll:it,PluginPollCreator:mt,StreamTextarea:$},methods:{resizeTextarea:function(t){this.resizeTextareaElement(t.target),this.resizePostFormContainer()},resizePostFormContainer:function(){if(this.editPost&&this.$refs.vueDropZone){var t=parseFloat(this.$refs.vueDropZone.$el.style.height),e=0;this.$refs.postAttachmentList&&(e=parseFloat(this.$refs.postAttachmentList.clientHeight)),this.$parent.$el.querySelector(".stream-post").style.height=170+t+e+this.$refs.streamTextarea.querySelector("textarea").scrollHeight+"px"}this.currentPluginTemplate&&(this.$parent.$el.querySelector(".stream-post").style.height=90+this.$el.querySelector(".active-plugin-content").offsetHeight+"px")},resizeTextareaElement:function(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"},savePost:function(){var t=this;this.busyLoading=!0;var e=this,s={};if(s.body=this.bodyText,s.privacy=this.privacyValue.value,s.sticky=this.stickyValue,s.poll=this.poll?this.poll:void 0,this.editPost){var a=this.$config.get("api.apiPostUpdateUrl").replace("%node",this.editPost.nid).replace("%token",this.streamOptions.token);r["default"].axios.post(a,s,{withCredentials:!0}).then((function(s){if(1===s.data.status){e.editPost.body=s.data.nodeData.body,e.editPost.body_formatted=s.data.nodeData.body_formatted,e.editPost.privacy.privacyDefault=s.data.nodeData.privacy.privacyDefault,e.editPost.sticky=s.data.nodeData.sticky,e.editPost.poll=s.data.nodeData.poll;var a=new Event("nm-stream:update-model");document.dispatchEvent(a),t.$root.$emit("nm-stream:node:save",e.editPost),e.$refs.vueDropZone.getQueuedFiles().length>0?(e.dropzoneResetAfterComplete=!0,e.$refs.vueDropZone.processQueue()):e.resetForm()}else alert(t.$t("warning.error_occured_please_repeat_your_action"))}))}else{var i=this.$config.get("api.apiPostAddUrl").replace("%token",this.streamOptions.token);s.containerNID=this.streamOptions.containerNID,s.contextNID=this.streamOptions.contextNID,r["default"].axios.post(i,s,{withCredentials:!0}).then((function(s){if(1===s.data.status){var a=s.data.nodeData;e.$emit("stream-post-added",a),e.$refs.vueDropZone.getQueuedFiles().length>0?(e.$refs.vueDropZone.setOption("url",e.getPostUploadUrl(a)),e.dropzoneResetAfterComplete=!0,e.$refs.vueDropZone.processQueue()):e.resetForm()}else alert(t.$t("warning.error_occured_please_repeat_your_action"))}))}},escPressed:function(){0===this.bodyText.length&&this.resetForm()},submitOnCtrlEnter:function(t){t.ctrlKey&&this.savePost()},resetForm:function(){if(this.editPost)this.$emit("form-edit-canceled"),this.$parent.$el.querySelector(".stream-post").style.height="auto";else{this.formActive=!1,this.bodyText="";var t=parseInt(this.privacyDefault);this.privacyValue=r["default"]._.filter(this.privacyOptions,["value",t])[0],this.$refs.streamTextarea.querySelector("textarea.stream-textbody").blur(),this.$refs.streamTextarea.querySelector("textarea.stream-textbody").style.height="auto",this.stickyValue=0,this.poll=null}this.$refs.vueDropZone.removeAllFiles(),this.busyLoading=!1},dragOver:function(){var t=this;this.formActive=!0,this.$nextTick((function(){t.resizeDropArea()}))},queueCompleted:function(){this.dropzoneQueueProcessing&&(this.resetForm(),this.dropzoneResetAfterComplete=!1,this.dropzoneQueueProcessing=!1)},dropzoneQueueProcess:function(){this.dropzoneQueueProcessing=!0},resizeDropArea:function(){this.$refs.vueDropZone&&"250px"!==this.$refs.vueDropZone.$el.style.height&&(this.$refs.vueDropZone.$el.style.height="250px",this.$refs.vueDropZone.$el.querySelector("div.dz-message").style.marginTop="100px",this.resizePostFormContainer())},updateAuthor:function(){this.author=this.streamOptions.loggedInUser,this.editPost&&(this.author=this.editPost.user)},loadPrivacyOptions:function(t){var e=[];return Array.isArray(t)&&Array.isArray(this.streamOptions.privacyOptions)?(this.streamOptions.privacyOptions.forEach((function(s){t.indexOf(s.value)>-1&&e.push(s)})),e):e},initializePost:function(){var t=this;if(this.editPost){this.formActive=!0,this.bodyText=this.editPost.body,this.stickyValue=parseInt(this.editPost.sticky),this.poll=this.editPost.poll,this.privacyDefault=this.editPost.privacy.privacyDefault,this.privacyOptions=this.loadPrivacyOptions(this.editPost.privacy.privacyOptions);var e=parseInt(this.privacyDefault);this.privacyValue=r["default"]._.filter(this.privacyOptions,["value",e])[0],this.$nextTick((function(){t.resizeTextareaElement(t.$refs.streamTextarea.querySelector("textarea")),t.$refs.vueDropZone.$el.style.height="50px",t.$refs.vueDropZone.$el.querySelector("div.dz-message").style.marginTop="10px",t.resizePostFormContainer()}))}},getPostUploadUrl:function(t){var e="";return t||(t=this.editPost),e=t?this.$config.get("api.apiPostAttachmentUploadUrl").replace("%node",t.nid).replace("%token",this.streamOptions.token):this.$config.get("api.apiPostAttachmentUploadUrl").replace("%node",0).replace("%token",this.streamOptions.token),e},getAutoProcessQueue:function(){return!1},getDropZomeRemoveLabel:function(){return this.editPost?this.$t("label.nmDictHideFile"):this.$t("label.dictRemoveFile")},onAttachmentDeleteConf:function(t){this.$emit("post-form-onAttachmentDeleteConf",t)},pluginSubmitDialog:function(t){this.poll=t,this.pluginCloseDialog()},pluginCloseDialog:function(){var t=this;this.currentPluginTemplate="",this.$nextTick((function(){t.resizeTextareaElement(t.$refs.streamTextarea.querySelector("textarea"))}))},changedBodyText:function(t){this.bodyText=t},changedFormActive:function(t){this.formActive=t}},watch:{},mounted:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.privacyDefault=this.streamOptions.privacyDefault,this.privacyOptions=this.streamOptions.privacyOptions,this.loggedInUser=this.streamOptions.loggedInUser,this.$nextTick((function(){s.$el.setAttribute("style","height:"+s.$el.scrollHeight+"px;"),s.$el.addEventListener("input",s.resizeTextarea)})),this.privacyValue||(this.editPost?(this.privacyOptions=this.loadPrivacyOptions(this.editPost.privacy.privacyOptions),this.privacyDefault=this.editPost.privacy.privacyDefault):(this.privacyOptions=this.streamOptions.privacyOptions,this.privacyDefault=this.streamOptions.privacyDefault),e=parseInt(this.privacyDefault),this.privacyValue=r["default"]._.filter(this.privacyOptions,["value",e])[0],this.privacyValue||(this.privacyValue=this.privacyOptions[0],this.privacyDefault=this.privacyValue.value)),this.loggedInUser=this.streamOptions.loggedInUser,this.updateAuthor();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){this.$el.removeEventListener("input",this.resizeTextarea)},render:function(){return this.$slots.default[0]},data:function(){return{currentPluginTemplate:"",loggedInUser:null,author:null,privacyOptions:null,privacyDefault:null,formActive:!1,bodyText:"",poll:null,privacyValue:null,stickyValue:0,dropzoneResetAfterComplete:!1,files:null,busyLoading:!1,busyLoadingColor:"#888",busyLoadingSize:"10px",dropzoneQueueProcessing:!1,dropzoneOptions:{url:this.getPostUploadUrl(),createImageThumbnails:!1,autoProcessQueue:this.getAutoProcessQueue(),addRemoveLinks:!0,acceptedFiles:this.streamOptions.acceptedFiles,maxFilesize:20,dictDefaultMessage:this.$t("label.dictDefaultMessage"),dictFallbackMessage:this.$t("label.dictFallbackMessage"),dictFileTooBig:this.$t("label.customdictFileTooBig"),dictInvalidFileType:this.$t("label.dictInvalidFileType"),dictCancelUpload:this.$t("label.dictCancelUpload"),dictUploadCanceled:this.$t("label.dictUploadCanceled"),dictCancelUploadConfirmation:this.$t("label.dictCancelUploadConfirmation"),dictRemoveFile:this.getDropZomeRemoveLabel(),dictMaxFilesExceeded:this.$t("label.dictMaxFilesExceeded")}}},computed:{canSetSticky:function(){return this.editPost?this.editPost.permissions.canSetSticky:this.streamOptions.permissions.canCreateStickyPost}}},ht=pt,ft=(s("564d"),s("c7a1"),Object(w["a"])(ht,U,L,!1,null,"70c496b3",null)),vt=ft.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vue-poll"},[s("h4",{staticClass:"qst",domProps:{innerHTML:t._s(t.question)}}),s("div",{staticClass:"ans-cnt"},[t.finalResults||t.visibleResults?t._l(t.calcAnswers,(function(e,a){var i;return s("div",{key:a,class:(i={ans:!0},i[e.custom_class]=e.custom_class,i)},[s("div",{staticClass:"ans-voted",class:{final:t.finalResults,"ans-voted":!0,selected:e.selected}},[e.percent?s("span",{staticClass:"percent",domProps:{textContent:t._s(e.percent)}}):t._e(),s("span",{staticClass:"txt",domProps:{innerHTML:t._s(e.text)}})]),t.finalResults?s("span",{class:{bg:t.finalResults,selected:t.mostVotes==e.votes},style:{width:e.percent}}):s("span",{staticClass:"bg",style:{width:t.visibleResults?e.percent:"0%"}})])})):t._l(t.answersOptions,(function(e,a){var i;return s("div",{key:a,class:(i={ans:!0},i[e.custom_class]=e.custom_class,i)},[s("div",{class:{"ans-no-vote noselect":!0,active:e.selected},on:{click:function(s){return s.preventDefault(),t.handleVote(e)}}},[s("span",{staticClass:"txt",domProps:{innerHTML:t._s(e.text)}})])])}))],2),t.showTotalVotes&&(t.visibleResults||t.finalResults)?s("div",{staticClass:"votes",domProps:{textContent:t._s(t.totalVotesFormatted+" "+t.labelVotes+" ("+t.totalParticipantsFormatted+" "+t.labelParticipated+")")}}):t._e(),!t.finalResults&&!t.visibleResults&&t.totalSelections>0?[s("button",{staticClass:"btn btn-primary submit-button",attrs:{href:"#"},domProps:{textContent:t._s(t.submitButtonText)},on:{click:function(e){return e.preventDefault(),t.handleSubmit(e)}}})]:t._e(),!t.canEdit||t.finalResults||t.visibleResults?t._e():[s("button",{staticClass:"btn btn-primary submit-button",attrs:{href:"#"},domProps:{textContent:t._s(t.viewResultsButtonText)},on:{click:function(e){return e.preventDefault(),t.handleViewResults(e)}}})]],2)},gt=[],yt=(s("a9e3"),s("25f0"),{name:"plugin-poll-view",props:{question:{type:String,required:!0},answers:{type:Array,required:!0},showResults:{type:Boolean,default:!1},showTotalVotes:{type:Boolean,default:!0},finalResults:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},submitButtonText:{type:String,default:function(){return this.$t("plugins.poll.submit")}},viewResultsButtonText:{type:String,default:function(){return this.$t("plugins.poll.viewResults")}},customId:{type:Number,default:0},numberParticipants:{type:Number,default:0},canEdit:{type:Boolean,default:!1}},data:function(){return{visibleResults:JSON.parse(this.showResults),answersOptions:[{}]}},computed:{totalVotes:function(){var t=0;return this.answers.filter((function(e){!isNaN(e.votes)&&e.votes>0&&(t+=parseInt(e.votes))})),t},totalVotesFormatted:function(){return this.totalVotes.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},labelVotes:function(){return 1===this.totalVotes?this.$t("plugins.poll.vote"):this.$t("plugins.poll.votes")},totalParticipantsFormatted:function(){return this.numberParticipants.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},labelParticipants:function(){return 1===this.numberParticipants?this.$t("plugins.poll.participant"):this.$t("plugins.poll.participants")},labelParticipated:function(){return this.$t("plugins.poll.participated")},mostVotes:function(){var t=0;return this.answers.filter((function(e){!isNaN(e.votes)&&e.votes>0&&e.votes>=t&&(t=e.votes)})),t},calcAnswers:function(){var t=this;return 0===this.totalVotes?this.answers.map((function(t){return t.percent="0%",t})):this.answers.filter((function(e){return!isNaN(e.votes)&&e.votes>0?e.percent=Math.round(parseInt(e.votes)/t.totalVotes*100)+"%":e.percent="0%",e}))},totalSelections:function(){return this.answersOptions.filter((function(t){return t.selected})).length}},mounted:function(){var t=this;0===this.totalVotes&&(this.answersOptions=this.answers.map((function(t){return t.percent="0%",t}))),this.answersOptions=this.answers.filter((function(e){return!isNaN(e.votes)&&e.votes>0?e.percent=Math.round(parseInt(e.votes)/t.totalVotes*100)+"%":e.percent="0%",e}))},methods:{handleSubmit:function(){var t=[];this.answersOptions.filter((function(e){e.selected&&(e.votes++,t.push({value:e.value,votes:e.votes}))})),this.visibleResults=!0;var e={arSelected:t,totalVotes:this.totalVotes};this.customId&&(e.customId=this.customId),this.answers=this.answersOptions,this.$emit("addvote",e)},handleViewResults:function(){this.visibleResults=!0},deselectAll:function(){return this.answersOptions.map((function(t){return t.selected=!1,t}))},handleVote:function(t){this.multiple?(void 0===t.selected&&console.log("Please add 'selected: false' on the answer object"),t.selected=!t.selected):t.selected?this.deselectAll():(this.deselectAll(),t.selected=!0)}}}),_t=yt,Ct=(s("c187"),Object(w["a"])(_t,bt,gt,!1,null,null,null)),xt=Ct.exports,wt={api:{apiInitUrl:"/api/v2.0/nm_stream/node/%node/initialize",apiPollUpdateUrl:"/api/v2.0/nm_stream/node/%node/poll_update/%offset/%limit/%token",apiPostAttachmentDeleteUrl:"/api/v2.0/nm_stream/node/%node/file/%file/delete/%token",apiPostAttachmentUploadUrl:"/api/v2.0/nm_stream/node/%node/file/upload/%token",apiPostUpdateUrl:"/api/v2.0/nm_stream/node/%node/update/%token",apiPostAddUrl:"/api/v2.0/nm_stream/node/add/%token",apiPostDeleteUrl:"/api/v2.0/nm_stream/node/%node/delete/%token",apiCommentUpdateUrl:"/api/v2.0/nm_stream/comment/%comment/update/%token",apiCommentAddUrl:"/api/v2.0/nm_stream/node/%node/comment/add/%token",apiCommentDeleteUrl:"/api/v2.0/nm_stream/comment/%comment/delete/%token",apiNodePollAddVote:"/api/v2.0/nm_stream/node/%node/poll/add_vote/%token",apiUserMentionMembers:"/api/v2.0/nm_stream/node/%node/get/mention_members"}},kt={addVote:function(t,e,s){var a=this;return Object(d["a"])(regeneratorRuntime.mark((function i(){var n,o,l,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n={arSelected:[]},e.arSelected?n.arSelected=e.arSelected:n.arSelected=[{value:e.value,votes:e.votes}],o=wt.api.apiNodePollAddVote.replace("%node",t).replace("%token",s),l=n.arSelected,i.next=6,r["default"].axios.post(o,l,{withCredentials:!0});case 6:if(c=i.sent,1!==c.data.status){i.next=11;break}return i.abrupt("return",c.data);case 11:alert(a.$t("warning.error_occured_please_repeat_your_action"));case 12:case"end":return i.stop()}}),i)})))()}},$t={props:["streamOptions","post","comments","mentionMembers"],components:{StreamComment:z,StreamCommentForm:j,StreamPostForm:vt,PluginPollView:xt},name:"stream-post",data:function(){return{pollViewRenderUpdateFlag:!1,pollViewRenderOnceKey:1,initializeForm:!1,showComments:!1,curDeleteAttachment:null,streamPostFormComponent:""}},computed:{canEdit:function(){return this.post.permissions.canEdit},canDelete:function(){return this.post.permissions.canDelete},canCreateComment:function(){return!0},sortedComments:function(){return r["default"]._.orderBy(this.comments,"created","desc")},modalID:function(){return"modal-delete"+this.post.nid},privacy:function(){var t=parseInt(this.post.privacy.privacyDefault);return r["default"]._.filter(this.streamOptions.privacyOptionsAll,["value",t])[0]},streamLink:function(){return this.post.container.link+"?streamNode="+this.post.nid}},mounted:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$root.$on("plugins:poll:creator:save",(function(){e.pollViewRenderUpdateFlag=!0})),this.$root.$on("nm-stream:node:save",(function(){e.pollViewRenderUpdateFlag&&(e.pollViewRenderUpdateFlag=!1,e.pollViewRenderOnceKey++)}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{editPost:function(){var t=this;this.initializeForm=!0,this.showComments=!1,setTimeout((function(){t.$el.classList.add("flip-active"),t.$refs.streamPostForm.initializePost(),t.$refs.backDelete.classList.add("hide"),t.$refs.backEdit.classList.remove("hide")}),200)},toggleComments:function(){this.showComments=!this.showComments,this.showComments&&this.$nextTick((function(){var t=new Event("nm-stream:update");document.dispatchEvent(t)}))},deletePost:function(){var t=this;this.showComments=!1,setTimeout((function(){t.$el.classList.add("flip-active"),t.$refs.backEdit.classList.add("hide"),t.$refs.backDelete.classList.remove("hide")}),200)},editCanceled:function(){this.$el.classList.remove("flip-active")},onDeleteSubmit:function(){var t=this,e=this,s=this.$config.get("api.apiPostDeleteUrl").replace("%node",this.post.nid).replace("%token",this.streamOptions.token);r["default"].axios.get(s,{withCredentials:!0}).then((function(s){1===s.data.status?(e.$emit("stream-post-deleted",e.post),t.$el.classList.remove("flip-active")):alert(t.$t("warning.error_occured_please_repeat_your_action"))}))},onDeleteCancel:function(){this.$el.classList.remove("flip-active")},onAttachmentDeleteConf:function(t){this.$refs.postDeleteAttachmentConf.show(),this.curDeleteAttachment=t},addUser:function(t){this.$emit("stream-user-added",t)},addComment:function(t){this.showComments=!0,this.$emit("stream-comment-added",t)},deleteComment:function(t){this.$emit("stream-comment-deleted",t)},hideModal:function(){this.$refs.postDeleteAttachmentConf.hide(),this.curDeleteAttachment=null},onAttachmentDelete:function(){var t=this.curDeleteAttachment,e=this,s=this.$config.get("api.apiPostAttachmentDeleteUrl").replace("%node",e.post.nid).replace("%file",t.fid).replace("%token",this.streamOptions.token);r["default"].axios.get(s,{withCredentials:!0}).then((function(){var s=e.post.attachments.findIndex((function(e){return e.fid===t.fid}));e.post.attachments.splice(s,1)})),this.hideModal()},pollAddVote:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:kt.addVote(e.post.nid,t,e.streamOptions.token);case 1:case"end":return s.stop()}}),s)})))()}},watch:{initializeForm:function(t){!0===t&&(this.streamPostFormComponent="StreamPostForm")}}},Pt=$t,Ot=(s("b363"),s("65b3"),Object(w["a"])(Pt,u,m,!1,null,"3a43246f",null)),Dt=Ot.exports,jt=s("d4ec"),St=function t(){Object(jt["a"])(this,t),this.privacyDefault="",this.privacyOptions=[],this.privacyOptionsAll=[],this.permissions=[],this.loggedInUser="",this.containerNID="",this.contextNID="",this.token="",this.timestamp="",this.acceptedFiles="",this.filterAvailableContexts=[],this.filterAvailableUsers=[]},At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"stream-filter-form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-10 stream-filter-input-wrapper"},[s("transition",{attrs:{name:"fade"}},[t.filterWidgetVisible?s("div",{staticClass:"row"},[t.streamOptions.contextNID?t._e():s("div",{staticClass:"col-md-4"},[s("vue-typeahead-bootstrap",{ref:"context",staticClass:"stream-filter-context",class:{"is-invalid":t.isInValidContext()},attrs:{placeholder:t.$t("filter.placeholder.context"),serializer:function(t){return t.title},data:t.contexts},on:{hit:function(e){t.contextSelected=e}},model:{value:t.contextSearch,callback:function(e){t.contextSearch=e},expression:"contextSearch"}})],1),s("div",{class:{"col-md-6":t.streamOptions.contextNID,"col-md-4":!t.streamOptions.contextNID}},[s("vue-typeahead-bootstrap",{ref:"username",staticClass:"stream-filter-context",class:{"is-invalid":t.isInValidUser()},attrs:{placeholder:t.$t("filter.placeholder.username"),serializer:function(t){return t.realname},data:t.users},on:{hit:function(e){t.userSelected=e}},model:{value:t.userSearch,callback:function(e){t.userSearch=e},expression:"userSearch"}})],1),s("div",{class:{"col-md-6":t.streamOptions.contextNID,"col-md-4":!t.streamOptions.contextNID}},[s("stream-privacy-widget",{attrs:{privacyValue:t.privacyValue,privacyOptions:t.privacyOptions},on:{interface:function(e){t.privacyValue=e}}})],1)]):t._e()])],1),s("div",{staticClass:"col-md-2 stream-filter-action-wrapper"},[s("transition",{attrs:{name:"fade"}},[t.contextSearch||t.userSearch||t.privacyValue?s("button",{staticClass:"stream-filter-reset",attrs:{type:"reset",href:"#"},on:{click:function(e){return t.resetClick()}}},[s("font-awesome-icon",{attrs:{icon:["fa","times"]}})],1):t._e()]),s("button",{staticClass:"stream-filter-submit",attrs:{type:"submit",disabled:(t.isInValidContext()||t.isInValidUser()||!t.contextSearch&&!t.userSearch&&!t.privacyValue)&&t.filterWidgetVisible},on:{click:function(e){return t.filterClick()}}},[s("font-awesome-icon",{attrs:{icon:["fa","filter"]}})],1)],1)])])},Tt=[],zt=s("d726"),Ut={name:"StreamFilter",props:["streamOptions"],components:{StreamPrivacyWidget:q,VueTypeaheadBootstrap:zt["a"]},data:function(){return{contextSearch:null,contextSelected:null,contexts:this.streamOptions.filterAvailableContexts,userSearch:null,userSelected:null,users:this.streamOptions.filterAvailableUsers,username:null,privacyValue:null,filterActive:null,filterWidgetVisible:!1,privacyOptions:this.streamOptions.privacyOptions}},methods:{onSubmit:function(){},filterClick:function(){if(this.filterWidgetVisible){var t=this.privacyValue?this.privacyValue.value:null,e={};this.contextSelected&&this.contextSearch==this.contextSelected.title&&(e.context=this.contextSelected.nid),this.userSelected&&this.userSearch==this.userSelected.realname&&(e.user=this.userSelected.uid),t&&(e.privacy=t),(this.contextSelected||this.userSelected||t)&&(this.filterActive=!0,this.$root.$emit("widgets:filter:filter",e))}else this.filterWidgetVisible=!0},isInValidContext:function(){return!(!this.contextSearch||this.contextSelected&&this.contextSearch==this.contextSelected.title)},isInValidUser:function(){return!(!this.userSearch||this.userSelected&&this.userSearch==this.userSelected.realname)},resetClick:function(){this.contextSelected=null,this.userSelected=null,this.privacyValue=null,this.contextSearch="",this.userSearch="",this.filterActive&&(this.$root.$emit("widgets:filter:filter",null),this.filterActive=null)}}},Lt=Ut,Ft=(s("aa72"),s("e094"),Object(w["a"])(Lt,At,Tt,!1,null,"5cba8e6c",null)),Et=Ft.exports,Mt={getMentionMembers:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function s(){var a,i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=wt.api.apiUserMentionMembers.replace("%node",t),i={},s.next=4,r["default"].axios.post(a,i,{withCredentials:!0});case 4:if(n=s.sent,1!==n.data.status){s.next=9;break}return s.abrupt("return",n.data.mention_members);case 9:alert(e.$t("warning.error_occured_please_repeat_your_action"));case 10:case"end":return s.stop()}}),s)})))()}},Vt={name:"Stream",components:{StreamFilter:Et,StreamPost:Dt,StreamPostForm:vt},data:function(){return{posts:[],streamOptions:[],mentionMembers:[],comments:[],users:[],busyLoading:!1,busyLoadingMore:!1,busyLoadingColor:"#888",busyLoadingSize:"12px",maxPostsLimitReached:!1,loggedInUser:1,initialized:!1,infiniteScrollLimit:10,maxPostsToShow:10,pollingUpdate:null,containerNid:null,streamUpdateOnRerender:!1,streamFilter:null}},beforeMount:function(){this.$root.$el.attributes["data-container-nid"]&&(this.containerNid=this.$root.$el.attributes["data-container-nid"].value)},computed:{sortedPosts:function(){var t=r["default"]._.chain(this.posts).sortBy("created").sortBy("sticky").reverse().value(),e=t.slice(0,this.maxPostsToShow);return e}},methods:{initialize:function(){this.initializeStream()},addPost:function(t){this.posts.push(t);var e=new Event("nm-stream:update-model");document.dispatchEvent(e)},deletePost:function(t){var e=this.posts.indexOf(t);this.posts.splice(e,1);var s=new Event("nm-stream:update-model");document.dispatchEvent(s)},deleteComment:function(t){var e=this.comments.indexOf(t);this.comments.splice(e,1);var s=new Event("nm-stream:update-model");document.dispatchEvent(s)},addComment:function(t){this.comments.push(t);var e=new Event("nm-stream:update-model");document.dispatchEvent(e)},addUser:function(t){this.getUser(t.uid)||this.users.push(t)},initializeStream:function(){var t=this,e=this;r["default"].axios.get(this.$config.get("api.apiInitUrl").replace("%node",this.containerNid),{withCredentials:!0}).then((function(s){e.posts=s.data.stream.posts,e.users=s.data.stream.users,e.comments=s.data.stream.comments,e.streamOptions=new St,e.streamOptions.privacyOptions=s.data.stream.privacyOptions,e.streamOptions.privacyOptionsAll=s.data.stream.privacyOptionsAll,e.streamOptions.privacyDefault=s.data.stream.privacyDefault,e.streamOptions.permissions=s.data.stream.permissions,e.streamOptions.loggedInUser=t.getUser(s.data.stream.loggedInUser),e.streamOptions.token=s.data.stream.token,e.streamOptions.contextNID=s.data.stream.contextNID,e.streamOptions.containerNID=s.data.stream.containerNID,e.streamOptions.timestamp=s.data.stream.timestamp,e.streamOptions.acceptedFiles=s.data.stream.acceptedFiles,e.streamOptions.filterAvailableContexts=s.data.stream.filterAvailableContexts,e.streamOptions.filterAvailableUsers=s.data.stream.filterAvailableUsers,e.streamPlugins=[],e.initialized=!0,document.addEventListener("nm-stream:update-model",(function(){t.streamUpdateOnRerender=!0}),!1);var a=new Event("nm-stream:update-model");document.dispatchEvent(a),e.pollUpdate()}))},loadMore:function(){if(!this.initialized||this.busyLoadingMore||this.maxPostsLimitReached)return!1;this.busyLoadingMore=!0,this.maxPostsToShow+=this.infiniteScrollLimit,this.pollUpdate()},getUser:function(t){return r["default"]._.find(this.users,["uid",t])},getNodeComments:function(t){var e=r["default"]._.filter(this.comments,["nid",t]);if(e.length>0)for(var s in e)e[s].user=this.getUser(e[s].uid);return e},getLoadedPost:function(t){return t.user=this.getUser(t.uid),t},getFilterParams:function(){var t=new URLSearchParams;return this.streamFilter&&(this.streamFilter.context&&t.append("context_nid",this.streamFilter.context),this.streamFilter.user&&t.append("user_uid",this.streamFilter.user),this.streamFilter.privacy&&t.append("privacy_key",this.streamFilter.privacy)),t},pollUpdate:function(){var t=this;clearInterval(this.pollingUpdate),this.updateStream(),this.pollingUpdate=setInterval((function(){t.updateStream()}),5e3)},updateStream:function(){var t=this,e=this;if(document.hasFocus()){var s=this.getFilterParams(),a=this.$config.get("api.apiPollUpdateUrl").replace("%node",this.streamOptions.containerNID).replace("%offset",0).replace("%limit",e.maxPostsToShow).replace("%token",e.streamOptions.token);r["default"].axios.get(a,{params:s,withCredentials:!0}).then((function(s){e.busyLoadingMore&&(e.maxPostsLimitReached=e.posts.length>=s.data.stream.posts.length,e.busyLoadingMore=!1),e.posts=s.data.stream.posts,e.users=s.data.stream.users,e.comments=s.data.stream.comments,e.streamOptions.timestamp=s.data.stream.timestamp,t.busyLoading=!1;var a=new Event("nm-stream:update-model");document.dispatchEvent(a)}))}},mergeByProperty:function(t,e,s){r["default"]._.each(e,(function(e){var a=r["default"]._.find(t,(function(t){return t[s]===e[s]}));a?r["default"]._.extend(a,e):t.push(e)}))},getMentionMembers:function(t){return this.mentionMembers[t]||(this.mentionMembers[t]=[],this.getMentionMembersAsync(t)),this.mentionMembers[t]},getMentionMembersAsync:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Mt.getMentionMembers(t);case 2:e.mentionMembers[t]=s.sent;case 3:case"end":return s.stop()}}),s)})))()}},updated:function(){var t=this;this.streamUpdateOnRerender&&this.$nextTick((function(){var e=new Event("nm-stream:update");document.dispatchEvent(e),t.streamUpdateOnRerender=!1}))},mounted:function(){var t=this;this.initialize(),window.addEventListener("dragover",(function(t){t=t||event,t.preventDefault()}),!1),window.addEventListener("drop",(function(t){t=t||event,t.preventDefault()}),!1),this.$root.$on("widgets:filter:filter",(function(e){t.busyLoading=!0,t.streamFilter=e,t.pollUpdate()}))},beforeDestroy:function(){clearInterval(this.pollingUpdate)}},It=Vt,Rt=(s("5197"),s("5218"),Object(w["a"])(It,l,c,!1,null,"2b2095ba",null)),Nt=Rt.exports,qt=s("5f5b"),Bt=s("9955"),Zt=s.n(Bt),Ht=s("2ef0"),Qt=s.n(Ht),Kt=s("8e5f"),Wt=s("ecee"),Jt=s("b702"),Gt=s("ad3d"),Xt=s("a925"),Yt=s("bc3a"),te=s.n(Yt),ee=s("a7fe"),se=s.n(ee),ae=s("141d"),ie=s.n(ae),ne=s("57c8"),oe=s("487a"),re=s.n(oe),le=s("7df5"),ce=s.n(le),de=s("8a5d"),ue=s("e30a"),me=s.n(ue),pe=(s("e607"),s("bffd"));s("b40d");r["default"].config.productionTip=!1,Wt["c"].add(Jt["a"],Jt["b"],Jt["c"],H["a"],H["d"],H["c"],H["e"]),r["default"].component("font-awesome-icon",Gt["a"]),r["default"].component("pulse-loader",de["a"]),r["default"].component("multiselect",Kt["Multiselect"]),r["default"].config.productionTip=!1,r["default"].use(qt["a"]),r["default"].use(Zt.a,{name:"custom",lodash:Qt.a}),r["default"].use(Xt["a"]),r["default"].use(se.a,te.a),r["default"].use(ne["a"],{config:wt}),r["default"].use(re.a),r["default"].component("nl2br",ie.a),r["default"].use(ce.a);var he=s("c1df");s("b469"),r["default"].use(s("2ead"),{moment:he}),r["default"].component("VueCtkDateTimePicker",me.a),r["default"].component("vue-typeahead-bootstrap",zt["a"]);var fe=new Xt["a"]({locale:"de",messages:pe});window.stream=new r["default"]({i18n:fe,render:function(t){return t(Nt)}}).$mount("#stream")},5846:function(t,e,s){},"65b3":function(t,e,s){"use strict";var a=s("e2a5"),i=s.n(a);i.a},"66df":function(t,e,s){"use strict";var a=s("27d9"),i=s.n(a);i.a},6709:function(t,e,s){"use strict";var a=s("9dfc"),i=s.n(a);i.a},"77be":function(t,e,s){},"8d9c":function(t,e,s){"use strict";var a=s("ace3"),i=s.n(a);i.a},"98d9":function(t,e,s){},"9dfc":function(t,e,s){},"9f6b":function(t,e,s){},a1ca:function(t,e,s){"use strict";var a=s("e3a3"),i=s.n(a);i.a},aa4f:function(t,e,s){},aa72:function(t,e,s){"use strict";var a=s("aee1"),i=s.n(a);i.a},ace3:function(t,e,s){},aee1:function(t,e,s){},b363:function(t,e,s){"use strict";var a=s("f390"),i=s.n(a);i.a},bffd:function(t){t.exports=JSON.parse('{"de":{"placeholder":{"your_post_message":"Ihre Nachricht","your_comment_message":"Ihr Kommentar"},"label":{"attachments":"Anhänge","upload_files":"Dateien hochladen","attachment_delete":"Anhang löschen","dictDefaultMessage":"<i class=\'fa fa-cloud-upload\'></i> Dateien hochladen","dictFallbackMessage":"Ihr Browser unterstützt leider keinen Upload","dictInvalidFileType":"Dieser Dateityp wird nicht unterstützt","dictCancelUpload":"Upload abbrechen","dictUploadCanceled":"Der Upload wurde abgebrochen","dictCancelUploadConfirmation":"Upload wirklich abbrechen?","dictRemoveFile":"Entfernen","customdictFileTooBig":"Diese Datei ist zu groß. Maximale Größe: {{maxFilesize}} MB.","nmDictHideFile":"Verstecken","dictMaxFilesExceeded":"Das Uploadlimit von {{maxFiles}} wurde überschritten","postContextFrom":"Beitrag aus"},"link":{"show_x_comments":"{count} Kommentare anzeigen","hide_x_comments":"{count} Kommentare verstecken"},"button":{"cancel":"Abbrechen","post":"Speichern","edit":"Bearbeiten","delete":"Löschen","select_privacy":"Sichtbarkeit festlegen","delete_attachment":"Anhang löschen"},"warning":{"delete_post_really_want_to":"Möchten Sie den Beitrag wirklich löschen?","delete_attachment_really_want_to":"Möchten Sie den Anhang wirklich löschen?","delete_post_action_cannot_be_undone":"Sie sind dabei einen Beitrag zu löschen. Diese Aktion kann nicht rückgängig gemacht werden.","delete_comment_really_want_to":"Möchten Sie den Kommentar wirklich löschen?","delete_comment_action_cannot_be_undone":"Sie sind dabei einen Kommentar zu löschen. Diese Aktion kann nicht rückgängig gemacht werden.","error_occured_please_repeat_your_action":"Es ist ein Fehler aufgetreten, bitte wiederholen Sie Ihre letzte Aktion."},"empty":{"no_posts_found":"Keine Beiträge"},"plugins":{"sticky":{"title":"Beitrag anheften","status_title":"Beitrag angeheftet"},"poll":{"title":"Umfrage starten","new_poll":"Neue Umfrage starten","your_question":"Die Frage..","answer":"Antwort","allow_multiple_votes":"Mehrere Antworten erlauben","submit":"Abstimmen","viewResults":"Zwischenergebnis ansehen","save":"Speichern","create":"Erstellen","delete":"Löschen","cancel":"Abbrechen","status_created":"Erstellt","status_error":"Fehler","vote":"Stimme","votes":"Stimmen","participant":"Teilnahme","participants":"Teilnahmen","participated":"teilgenommen","pollEndDateLabel":"Ende der Umfrage festlegen","pollEndDateDescription":"Wird dieses Feld gesetzt, so ist ab diesem Zeitpunkt keine Abstimmung mehr möglich. Es wird das Umfrageergebnis angezeigt."}},"filter":{"placeholder":{"context":"Kurs/Lehrtext","username":"Person","privacy":"Privatsphäre"}}}}')},c187:function(t,e,s){"use strict";var a=s("98d9"),i=s.n(a);i.a},c7a1:function(t,e,s){"use strict";var a=s("5846"),i=s.n(a);i.a},c8c2:function(t,e,s){"use strict";var a=s("f034"),i=s.n(a);i.a},e094:function(t,e,s){"use strict";var a=s("261f"),i=s.n(a);i.a},e2a5:function(t,e,s){},e3a3:function(t,e,s){},f034:function(t,e,s){},f390:function(t,e,s){}});
//# sourceMappingURL=app.js.map